<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>


            <menuitem name="CMMS " id="cmms_menu" sequence="60" ></menuitem>

            <record model="ir.ui.view" id="cmms_machine_tree_view">
            <field name="name">cmms.machine.tree</field>
            <field name="model">cmms.machine</field>
            <field name="arch" type="xml" >
                <tree decoration-warning="state in ('repair')" decoration-danger="state in ('unstable')">
                    <field name="code" />
                    <field name="name"/>
                    <field name="model"/>
                    <field name="supplier_id"/>
                    <field name="mfg_year"/>
                    <field name="serial_no"/>
                    <field name="note"/>
                    <field name="condition"/>
                    <field name="is_active"/>
                    <field name="state"/>
                </tree>
            </field>
            </record>

            <record model="ir.ui.view" id="cmms_machine_form_view">
            <field name="name">cmms.machine.form</field>
            <field name="model">cmms.machine</field>
            <field name="arch" type="xml" >
                <form string="CMMS Machine">
                    <header>

                    </header>
                    <sheet>
                         <div class="oe_right oe_button_box">
                             <button name="%(action_cmms_store_invoice_line)d"
                                                                    type="action"
                                                                    class="oe_inline oe_stat_button"
                                                                    icon="fa-money"
                                                                    widget="statinfo"
                                                                    context="{'search_default_machine_id': active_ids}"
                                                                     help="Parts Cost">
                                                               <field name="parts_cost" widget="statinfo"/>
                             </button>
                        </div>
                        <div class="oe_left">
                            <label for="code"/>
                            <h1> <field name="code"/> </h1>
                        </div>
                        <group>
                             <field name="name"/>
                        </group>

                        <group>
                            <group>
                                <field name="id" invisible="1"/>
                                <field name="last_machine_code" readonly="1" attrs="{'invisible':[('id','!=',False)]}"/>
                                <field name="type_id" options="{'no_open':True,'no_create': True}"/>
                                <field name="category_id" options="{'no_open':True,'no_create': True}"/>
                                <field name="group_id" options="{'no_open':True,'no_create': True}"/>
                            </group>
                            <group>
                                <field name="company_id" options="{'no_open':True,'no_create': True}"/>
                                <field name="location_id" options="{'no_open':True, 'no_create': True}"/>
                                <field name="model"/>
                                <field name="supplier_id" options="{'no_open':True, 'no_create': True}"/>
                                <field name="mfg_year"/>
                                <field name="serial_no"/>
                            </group>
                         </group>
                        <notebook>
                            <page string="Description">
                                <field name="note"/>
                            </page>
                            <page string="Other Information">
                                <group>
                                    <group>
                                        <field name="set_code"/>
                                        <field name="is_machinery"/>
                                        <field name="unit"/>
                                        <field name="pm_scheme_id" options="{'no_open':True,'no_create': True}"/>
                                   </group>
                                    <group>
                                        <field name="condition" />
                                        <field name="state"/>
                                        <field name="is_active"/>
                                    </group>
                                </group>
                            </page>
                            <page string="PM Tasks">
                                <field name="pm_task_ids">
                                    <tree>
                                        <field name="task_id"/>
                                        <field name="interval_id"/>
                                        <field name="next_date"/>
                                        <field name="last_date"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Parts">
                                <field name="spare_part_ids"/>

                            </page>
                        </notebook>

                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" help="Follow this project to automatically track the events associated to tasks and issues of this project." groups="base.group_user"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
            </record>



        <!--<record id="cmms_machine_graph" model="ir.ui.view">-->
         <!--<field name="name">cmms.machine.graph</field>-->
         <!--<field name="model">cmms.machine</field>-->
         <!--<field name="arch" type="xml">-->
             <!--<graph string="Machine Analysis" >-->
                 <!--<field name="type_id" type="row"/>-->
                 <!--<field name="category_id" type="row"/>-->
                 <!--<field name="state" type="col"/>-->

             <!--</graph>-->
         <!--</field>-->
    <!--</record>-->


        <record id="filter_by_supplier" model="ir.filters">
            <field name="name">By Group</field>
            <field name="model_id">cmms.machine</field>
            <field name="domain">[]</field>
            <field name="user_id" eval="False"/>
            <field name="context">{'group_by': ['group_id']}</field>
        </record>


            <record model="ir.actions.act_window" id="action_cmms_machine_form_view">
                <field name="name" >Machine</field>
                <field name="res_model">cmms.machine</field>
                <field name="view_mode">tree,form</field>
            </record>

            <menuitem name="Machinery" parent="cmms_menu" id="cmms_machinery" sequence="1" />

            <menuitem  parent="cmms_machinery" id="cmms_machine" action ="action_cmms_machine_form_view" sequence="1" />


            <record model="ir.ui.view" id="cmms_machine_type_view">
            <field name="name">cmms.machine.type.tree</field>
            <field name="model">cmms.machine.type</field>
            <field name="type">tree</field>
            <field name="arch" type="xml" >
                <tree string="Machine Type" editable="bottom">
                    <field name="name"/>
                </tree>
            </field>
            </record>

             <record model="ir.actions.act_window" id="action_cmms_machine_type">
                <field name="name" >Type</field>
                <field name="res_model">cmms.machine.type</field>
            </record>


          <record model="ir.ui.view" id="cmms_machine_location_tree_view">
            <field name="name">cmms.machine.location.tree</field>
            <field name="model">cmms.machine.location</field>
            <field name="type">tree</field>
            <field name="arch" type="xml" >
                <tree string="Location" editable="bottom">
                    <field name="name"/>
                    <field name="company_id"/>
                </tree>
            </field>
        </record>

             <record model="ir.actions.act_window" id="action_cmms_machine_location">
                <field name="name" >Location</field>
                 <field name="res_model">cmms.machine.location</field>
            </record>



            <record model="ir.ui.view" id="cmms_machine_categ_view">
            <field name="name">cmms.machine.categ.tree</field>
            <field name="model">cmms.machine.category</field>
            <field name="type">tree</field>
            <field name="arch" type="xml" >
                <tree string="Machine Category" editable="bottom">
                    <field name="name"/>
                </tree>
            </field>
            </record>

          <record model="ir.actions.act_window" id="action_cmms_machine_category">
                <field name="name" >Category</field>
                <field name="res_model">cmms.machine.category</field>
            </record>

         <record model="ir.ui.view" id="cmms_machine_group_view">
            <field name="name">cmms.machine.group.tree</field>
            <field name="model">cmms.machine.group</field>
            <field name="type">tree</field>
            <field name="arch" type="xml" >
                <tree string="Machine Group" editable="bottom">
                    <field name="code"/>
                    <field name="description"/>
                </tree>
            </field>
         </record>

         <record model="ir.actions.act_window" id="action_cmms_machine_group">
                <field name="name" >Group</field>
                <field name="res_model">cmms.machine.group</field>
            </record>



            <record model="ir.ui.view" id="cmms_pm_scheme_tree_view">
            <field name="name">cmms.pm.scheme.tree_1</field>
            <field name="model">cmms.pm.scheme</field>
           <field name="arch" type="xml" >
                <tree string="PM Scheme">
                    <field name="name" string="Scheme Name" />
                </tree>
            </field>
        </record>


    <record model="ir.ui.view" id="cmms_pm_scheme_form_view">
        <field name="name">cmms.pm.scheme.form</field>
        <field name="model">cmms.pm.scheme</field>
        <field name="type">form</field>
        <field name="arch" type="xml" >
            <form string="Preventive Maintenance Scheme">
                <sheet>
                <group>
                    <field name="name"/>
                    <field name="pm_tasks_ids">
                        <tree string="PM Tasks" editable="bottom">
                            <field name="name"/>
                            <field name="interval_id"/>
                        </tree>
                    </field>
                    <field name="machine_ids" widget="many2many_tags">

                    </field>
                </group>
                </sheet>
            </form>
        </field>
    </record>

        <record model="ir.ui.view" id="cmms_pm_task_tree_view">
            <field name="name">cmms.pm.task.tree</field>
            <field name="model">cmms.pm.task.master</field>
            <field name="arch" type="xml" >
                <tree string="PM Task">
                    <field name="name" />
                    <field name="pm_scheme_id"/>
                    <field name="interval_id"/>
                    <field name="action_by"/>

                </tree>
            </field>
        </record>





            <menuitem name="Reports" parent="cmms_menu" id="cmms_report_menu" sequence="70"/>

            <menuitem name="Configuration" parent="cmms_menu" id="cmms_config_menu" sequence="99"/>
            <menuitem name="Machine Config" parent="cmms_config_menu" id="cmms_machine_config_menu" sequence="1"/>
            <menuitem  parent="cmms_machine_config_menu" id="cmms_machine_type_menu" sequence="1" action="action_cmms_machine_type"/>
            <menuitem  parent="cmms_machine_config_menu" id="cmms_machine_categ_menu" sequence="2" action="action_cmms_machine_category"/>
            <menuitem  parent="cmms_machine_config_menu" id="cmms_machine_group_menu" sequence="3" action="action_cmms_machine_group"/>
            <menuitem  parent="cmms_machine_config_menu" id="cmms_machine_location_menu" action="action_cmms_machine_location" sequence="4" />


     </data>
</openerp>