<?xml version="1.0" encoding="utf-8"?>
<odoo>
<data>
    <template id="report_machine_analysis_summary_template">
     <t t-call="report.html_container">
         <t t-call="cmms.cmms_internal_layout"/>
            <div class="page">
                 <div class="row">
                     <div class="col-xs-12 text-center"><h3>Machine Breakdown Analysis Report</h3></div>
                 </div>
                 <table  class="table table-bordered">
                     <caption class="text-center">Year:<span t-esc="year"/></caption>
                    <thead>
                         <tr>
                             <th colspan="3">Machine</th>
                             <th>JAN</th>
                             <th>FEB</th>
                             <th>MAR</th>
                             <th>APR</th>
                             <th>MAY</th>
                             <th>JUN</th>
                             <th>JULY</th>
                             <th>AUG</th>
                             <th>SEP</th>
                             <th>OCT</th>
                             <th>NOV</th>
                             <th>DEC</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="docs" t-as="o">
                            <tr style="page-break-inside: avoid">
                                <th colspan="15" class="text-center"><span t-esc="o.name"/></th>
                            </tr>
                                <t t-set="categs" t-value="get_category(o)"/>
                                <t t-foreach="categs" t-as="c">
                                    <tr><th colspan="15" class="text-left"><span t-field="c.name"/></th></tr>
                                    <t t-set="macs" t-value="get_machine(o,c)" />
                                       <t t-foreach="macs" t-as="m">
                                            <tr rowspan="3" style="page-break-inside: avoid">
                                                <t t-set="m_val" t-value="m.get('machine_id')"/>
                                                <td> <span t-esc="m_val.code"/></td>
                                                <td> <span t-esc="m_val.name"/></td>
                                                <td>Breakdown</td>
                                                <t t-set="breakdowns" t-value="get_breakdown_count(m_val.id)" />
                                                    <t t-foreach="breakdowns" t-as="b">
                                                        <td><span t-esc="b.get('January')" /></td>
                                                        <td><span t-esc="b.get('February')" /></td>
                                                        <td><span t-esc="b.get('March')" /></td>
                                                        <td><span t-esc="b.get('April')" /></td>
                                                        <td><span t-esc="b.get('May')" /></td>
                                                        <td><span t-esc="b.get('June')" /></td>
                                                        <td><span t-esc="b.get('July')" /></td>
                                                        <td><span t-esc="b.get('August')" /></td>
                                                        <td><span t-esc="b.get('September')" /></td>
                                                        <td><span t-esc="b.get('October')" /></td>
                                                        <td><span t-esc="b.get('November')" /></td>
                                                        <td><span t-esc="b.get('December')" /></td>

                                                    </t>
                                            </tr>
                                            <tr  rowspan="3" style="page-break-inside: avoid">
                                                <td colspan="2"></td>
                                                <td>Expense</td>
                                                <td><span t-esc="m.get('January')" /></td>
                                                <td><span t-esc="m.get('February')" /></td>
                                                <td><span t-esc="m.get('March')" /></td>
                                                <td><span t-esc="m.get('April')" /></td>
                                                <td><span t-esc="m.get('May')" /></td>
                                                <td><span t-esc="m.get('June')" /></td>
                                                <td><span t-esc="m.get('July')" /></td>
                                                <td><span t-esc="m.get('August')" /></td>
                                                <td><span t-esc="m.get('September')" /></td>
                                                <td><span t-esc="m.get('October')" /></td>
                                                <td><span t-esc="m.get('November')" /></td>
                                                <td><span t-esc="m.get('December')" /></td>

                                            </tr>
                                            <tr  rowspan="3" style="page-break-inside: avoid">
                                                <td colspan="2"></td>
                                                <td>Idle Time</td>
                                                <td colspan="12"></td>
                                            </tr>
                                       </t>
                                </t>
                        </t>
                    </tbody>
                 </table>
            </div>
         </t>
    </template>
</data>
</odoo>









































































































































































